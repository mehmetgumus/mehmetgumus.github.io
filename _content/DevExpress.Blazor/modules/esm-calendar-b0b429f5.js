import"./esm-chunk-eaca7b99.js";import{EnsureElement as t,GetParentByClassName as e,PreventEventAndBubble as n}from"./esm-dom-utils-57c82d80.js";import{L as o,h as i,u as a}from"./esm-chunk-e0d053f7.js";import{T as c}from"./esm-chunk-38c61c5f.js";function r(e,r,u){if(!(e=t(e)))return;function d(t,n){for(var o,i=(e.dayCells||(e.dayCells=e.querySelectorAll(".dxbs-day")),e.dayCells),a=0;o=i[a];a++){var c=o.getBoundingClientRect();if(c.top<=n&&n<c.bottom&&c.left<=t&&t<c.right)return o}}function h(t){if(!i("TouchStart")){var n=s(t.srcElement);n&&(e.inSelectionMode=!0,e.firstDate=l(n))}}function f(t){e.inSelectionMode&&(e.throttledDrag||(e.throttledDrag=c.Throttle(function(t){var n=d(t.clientX,t.clientY);if(n){var o=l(n);if(!o||!e.firstDate)return;e.lastDate?u.invokeMethodAsync("ChangeSelectionRange",o):(u.invokeMethodAsync("StartSelectionRange",e.firstDate,!t.ctrlKey),e.lastDate=o)}},20)),e.throttledDrag(t))}function v(t){e.inSelectionMode&&e.lastDate&&u.invokeMethodAsync("EndSelectionRange",!1),e.firstDate=void 0,e.lastDate=void 0,e.inSelectionMode=!1}function m(t){a(function(){},"TouchStart",300,!0)}function g(t){var n=s(t.srcElement);if(n){e.inSelectionMode=!0;var o=l(n);e.lastDate=o,u.invokeMethodAsync("StartSelectionRange",o,!1)}}function E(t){if(e.inSelectionMode){var o=d(t.touches[0].clientX,t.touches[0].clientY);if(o){var i=l(o);i&&e.lastDate-i!=0&&u.invokeMethodAsync("ChangeSelectionRange",i)}n(t)}}function S(t){e.inSelectionMode&&(u.invokeMethodAsync("EndSelectionRange",!0),n(t)),e.inSelectionMode=!1}e.dayCells=void 0,function(t){o.attachEventToElement(t,"touchstart",m),o.attachEventToElement(t,"touchmove",E),o.attachEventToElement(t,"touchend",S),o.attachLongTabEventToElement(t,g),o.attachEventToElement(t,"mousedown",h),o.attachEventToElement(t,"mousemove",f),o.attachEventToElement(t,"mouseup",v)}(e);let y=r.getBoundingClientRect();return r.style.width=y.width+"px",r.style.height=y.height+"px",Promise.resolve("ok")}function l(t){return new Date(parseInt(t.getAttribute("data-date")))}function s(t){return e(t,"dxbs-day")}function u(e){if(e=t(e))return DisposeEvents(e),Promise.resolve("ok")}const d={Init:r,Dispose:u};export default d;export{u as Dispose,r as Init};
